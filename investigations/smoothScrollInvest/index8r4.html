<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://kit.fontawesome.com/35878de880.js" crossorigin="anonymous"></script>
</head>
<style>

body {
  margin: 10em 10em 22em 10em;
  /* padding-top: 2em; */
}
.navbar {
  position: fixed;
  top: 0px;
  left: 10em;
  width: 100%;
  height: 7em;
  background: white;
  padding-bottom: 20px;
}

.btn {
  margin: 2em 0 0 0;
  font-size: 1.5em;
}

#previous {
  color: white;
  background: red;
  border: 2px solid black;
  padding: 4px;
}
#next {
  color: white;
  background: green;
  border: 2px solid black;
  padding: 4px;
  margin-left: 1em;
}


</style>
<body>
  <nav id='navbar' class="navbar">
    <div>
      <button type="button" class="btn" id="previous">Back</button>
      <button type="button" class="btn" id="next">Forward</button>
    </div>
  </nav>
  
  <h2 id="ch1" class="chapter">Chapter 1</h2>
  <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Viverra nam libero justo laoreet sit amet cursus. Interdum velit laoreet id donec ultrices tincidunt arcu non. Pellentesque nec nam aliquam sem et tortor consequat. Quis commodo odio aenean sed adipiscing diam donec. Amet consectetur adipiscing elit duis tristique sollicitudin nibh sit. Massa sed elementum tempus egestas sed sed risus pretium. In fermentum et sollicitudin ac orci phasellus egestas tellus. Scelerisque felis imperdiet proin fermentum leo vel orci. Varius sit amet mattis vulputate enim nulla aliquet porttitor lacus.
  </p>
  <p>
    Nunc eget lorem dolor sed viverra ipsum nunc aliquet bibendum. Posuere morbi leo urna molestie at elementum eu facilisis sed. Velit dignissim sodales ut eu sem integer vitae justo eget. Enim ut sem viverra aliquet eget sit amet. Ac felis donec et odio pellentesque diam. Dolor sit amet consectetur adipiscing elit. Venenatis cras sed felis eget velit. Pretium quam vulputate dignissim suspendisse in est ante in nibh. Dui faucibus in ornare quam viverra orci sagittis. Dolor morbi non arcu risus quis. Sem nulla pharetra diam sit amet nisl suscipit adipiscing. Urna condimentum mattis pellentesque id. Dolor sit amet consectetur adipiscing elit duis tristique sollicitudin nibh. Malesuada fames ac turpis egestas sed tempus. Mus mauris vitae ultricies leo integer malesuada nunc vel. Integer enim neque volutpat ac tincidunt vitae semper quis. Nunc non blandit massa enim.
  </p>
  <p>
    Iaculis eu non diam phasellus vestibulum lorem sed. Accumsan sit amet nulla facilisi morbi tempus iaculis urna. Fringilla phasellus faucibus scelerisque eleifend donec pretium vulputate sapien nec. In egestas erat imperdiet sed euismod nisi. Sed lectus vestibulum mattis ullamcorper. Facilisi nullam vehicula ipsum a arcu cursus. Fermentum posuere urna nec tincidunt praesent semper. Rhoncus dolor purus non enim. Nibh ipsum consequat nisl vel pretium. Leo urna molestie at elementum eu facilisis. Ullamcorper morbi tincidunt ornare massa eget. Convallis convallis tellus id interdum velit laoreet id donec ultrices. Elit sed vulputate mi sit amet mauris commodo quis imperdiet. At auctor urna nunc id cursus metus aliquam eleifend mi. Purus in massa tempor nec feugiat nisl. Lectus magna fringilla urna porttitor rhoncus dolor purus non enim. Enim nunc faucibus a pellentesque.
  </p>
  <p>
    In massa tempor nec feugiat nisl pretium. Pretium viverra suspendisse potenti nullam ac tortor. Porttitor eget dolor morbi non arcu risus quis varius. Etiam sit amet nisl purus. Nunc consequat interdum varius sit amet mattis vulputate. Eget dolor morbi non arcu. Gravida cum sociis natoque penatibus et magnis. Elementum integer enim neque volutpat ac. Pretium nibh ipsum consequat nisl vel pretium. Sagittis nisl rhoncus mattis rhoncus urna neque viverra justo nec. Id diam vel quam elementum pulvinar etiam non. Ornare suspendisse sed nisi lacus. Auctor augue mauris augue neque gravida in fermentum et. Ornare suspendisse sed nisi lacus sed. Iaculis at erat pellentesque adipiscing commodo. In fermentum et sollicitudin ac orci phasellus egestas tellus rutrum. Iaculis urna id volutpat lacus laoreet non curabitur. Vitae elementum curabitur vitae nunc sed. Ut eu sem integer vitae justo eget magna fermentum iaculis. Sit amet cursus sit amet dictum sit amet justo donec.
  </p>

  <h2 id="ch2" class="chapter">Chapter 2</h2>
  <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Viverra nam libero justo laoreet sit amet cursus. Interdum velit laoreet id donec ultrices tincidunt arcu non. Pellentesque nec nam aliquam sem et tortor consequat. Quis commodo odio aenean sed adipiscing diam donec. Amet consectetur adipiscing elit duis tristique sollicitudin nibh sit. Massa sed elementum tempus egestas sed sed risus pretium. In fermentum et sollicitudin ac orci phasellus egestas tellus. Scelerisque felis imperdiet proin fermentum leo vel orci. Varius sit amet mattis vulputate enim nulla aliquet porttitor lacus.
  </p>
  <p>
  Nunc eget lorem dolor sed viverra ipsum nunc aliquet bibendum. Posuere morbi leo urna molestie at elementum eu facilisis sed. Velit dignissim sodales ut eu sem integer vitae justo eget. Enim ut sem viverra aliquet eget sit amet. Ac felis donec et odio pellentesque diam. Dolor sit amet consectetur adipiscing elit. Venenatis cras sed felis eget velit. Pretium quam vulputate dignissim suspendisse in est ante in nibh. Dui faucibus in ornare quam viverra orci sagittis. Dolor morbi non arcu risus quis. Sem nulla pharetra diam sit amet nisl suscipit adipiscing. Urna condimentum mattis pellentesque id. Dolor sit amet consectetur adipiscing elit duis tristique sollicitudin nibh. Malesuada fames ac turpis egestas sed tempus. Mus mauris vitae ultricies leo integer malesuada nunc vel. Integer enim neque volutpat ac tincidunt vitae semper quis. Nunc non blandit massa enim.
  </p>
  <p>
    Iaculis eu non diam phasellus vestibulum lorem sed. Accumsan sit amet nulla facilisi morbi tempus iaculis urna. Fringilla phasellus faucibus scelerisque eleifend donec pretium vulputate sapien nec. In egestas erat imperdiet sed euismod nisi. Sed lectus vestibulum mattis ullamcorper. Facilisi nullam vehicula ipsum a arcu cursus. Fermentum posuere urna nec tincidunt praesent semper. Rhoncus dolor purus non enim. Nibh ipsum consequat nisl vel pretium. Leo urna molestie at elementum eu facilisis. Ullamcorper morbi tincidunt ornare massa eget. Convallis convallis tellus id interdum velit laoreet id donec ultrices. Elit sed vulputate mi sit amet mauris commodo quis imperdiet. At auctor urna nunc id cursus metus aliquam eleifend mi. Purus in massa tempor nec feugiat nisl. Lectus magna fringilla urna porttitor rhoncus dolor purus non enim. Enim nunc faucibus a pellentesque.
  </p>
  <p>
    In massa tempor nec feugiat nisl pretium. Pretium viverra suspendisse potenti nullam ac tortor. Porttitor eget dolor morbi non arcu risus quis varius. Etiam sit amet nisl purus. Nunc consequat interdum varius sit amet mattis vulputate. Eget dolor morbi non arcu. Gravida cum sociis natoque penatibus et magnis. Elementum integer enim neque volutpat ac. Pretium nibh ipsum consequat nisl vel pretium. Sagittis nisl rhoncus mattis rhoncus urna neque viverra justo nec. Id diam vel quam elementum pulvinar etiam non. Ornare suspendisse sed nisi lacus. Auctor augue mauris augue neque gravida in fermentum et. Ornare suspendisse sed nisi lacus sed. Iaculis at erat pellentesque adipiscing commodo. In fermentum et sollicitudin ac orci phasellus egestas tellus rutrum. Iaculis urna id volutpat lacus laoreet non curabitur. Vitae elementum curabitur vitae nunc sed. Ut eu sem integer vitae justo eget magna fermentum iaculis. Sit amet cursus sit amet dictum sit amet justo donec.
  </p>

  <h2 id="ch3" class="chapter">Chapter 3</h2>
  <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Viverra nam libero justo laoreet sit amet cursus. Interdum velit laoreet id donec ultrices tincidunt arcu non. Pellentesque nec nam aliquam sem et tortor consequat. Quis commodo odio aenean sed adipiscing diam donec. Amet consectetur adipiscing elit duis tristique sollicitudin nibh sit. Massa sed elementum tempus egestas sed sed risus pretium. In fermentum et sollicitudin ac orci phasellus egestas tellus. Scelerisque felis imperdiet proin fermentum leo vel orci. Varius sit amet mattis vulputate enim nulla aliquet porttitor lacus.
  </p>
  <p>
  Nunc eget lorem dolor sed viverra ipsum nunc aliquet bibendum. Posuere morbi leo urna molestie at elementum eu facilisis sed. Velit dignissim sodales ut eu sem integer vitae justo eget. Enim ut sem viverra aliquet eget sit amet. Ac felis donec et odio pellentesque diam. Dolor sit amet consectetur adipiscing elit. Venenatis cras sed felis eget velit. Pretium quam vulputate dignissim suspendisse in est ante in nibh. Dui faucibus in ornare quam viverra orci sagittis. Dolor morbi non arcu risus quis. Sem nulla pharetra diam sit amet nisl suscipit adipiscing. Urna condimentum mattis pellentesque id. Dolor sit amet consectetur adipiscing elit duis tristique sollicitudin nibh. Malesuada fames ac turpis egestas sed tempus. Mus mauris vitae ultricies leo integer malesuada nunc vel. Integer enim neque volutpat ac tincidunt vitae semper quis. Nunc non blandit massa enim.
  </p>
  <p>
  Iaculis eu non diam phasellus vestibulum lorem sed. Accumsan sit amet nulla facilisi morbi tempus iaculis urna. Fringilla phasellus faucibus scelerisque eleifend donec pretium vulputate sapien nec. In egestas erat imperdiet sed euismod nisi. Sed lectus vestibulum mattis ullamcorper. Facilisi nullam vehicula ipsum a arcu cursus. Fermentum posuere urna nec tincidunt praesent semper. Rhoncus dolor purus non enim. Nibh ipsum consequat nisl vel pretium. Leo urna molestie at elementum eu facilisis. Ullamcorper morbi tincidunt ornare massa eget. Convallis convallis tellus id interdum velit laoreet id donec ultrices. Elit sed vulputate mi sit amet mauris commodo quis imperdiet. At auctor urna nunc id cursus metus aliquam eleifend mi. Purus in massa tempor nec feugiat nisl. Lectus magna fringilla urna porttitor rhoncus dolor purus non enim. Enim nunc faucibus a pellentesque.
  </p>
  <p>
  In massa tempor nec feugiat nisl pretium. Pretium viverra suspendisse potenti nullam ac tortor. Porttitor eget dolor morbi non arcu risus quis varius. Etiam sit amet nisl purus. Nunc consequat interdum varius sit amet mattis vulputate. Eget dolor morbi non arcu. Gravida cum sociis natoque penatibus et magnis. Elementum integer enim neque volutpat ac. Pretium nibh ipsum consequat nisl vel pretium. Sagittis nisl rhoncus mattis rhoncus urna neque viverra justo nec. Id diam vel quam elementum pulvinar etiam non. Ornare suspendisse sed nisi lacus. Auctor augue mauris augue neque gravida in fermentum et. Ornare suspendisse sed nisi lacus sed. Iaculis at erat pellentesque adipiscing commodo. In fermentum et sollicitudin ac orci phasellus egestas tellus rutrum. Iaculis urna id volutpat lacus laoreet non curabitur. Vitae elementum curabitur vitae nunc sed. Ut eu sem integer vitae justo eget magna fermentum iaculis. Sit amet cursus sit amet dictum sit amet justo donec.
  </p>

  <h2 id="ch4" class="chapter">Chapter 4</h2>
  <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Viverra nam libero justo laoreet sit amet cursus. Interdum velit laoreet id donec ultrices tincidunt arcu non. Pellentesque nec nam aliquam sem et tortor consequat. Quis commodo odio aenean sed adipiscing diam donec. Amet consectetur adipiscing elit duis tristique sollicitudin nibh sit. Massa sed elementum tempus egestas sed sed risus pretium. In fermentum et sollicitudin ac orci phasellus egestas tellus. Scelerisque felis imperdiet proin fermentum leo vel orci. Varius sit amet mattis vulputate enim nulla aliquet porttitor lacus.
  </p>
  <p>
    Nunc eget lorem dolor sed viverra ipsum nunc aliquet bibendum. Posuere morbi leo urna molestie at elementum eu facilisis sed. Velit dignissim sodales ut eu sem integer vitae justo eget. Enim ut sem viverra aliquet eget sit amet. Ac felis donec et odio pellentesque diam. Dolor sit amet consectetur adipiscing elit. Venenatis cras sed felis eget velit. Pretium quam vulputate dignissim suspendisse in est ante in nibh. Dui faucibus in ornare quam viverra orci sagittis. Dolor morbi non arcu risus quis. Sem nulla pharetra diam sit amet nisl suscipit adipiscing. Urna condimentum mattis pellentesque id. Dolor sit amet consectetur adipiscing elit duis tristique sollicitudin nibh. Malesuada fames ac turpis egestas sed tempus. Mus mauris vitae ultricies leo integer malesuada nunc vel. Integer enim neque volutpat ac tincidunt vitae semper quis. Nunc non blandit massa enim.
  </p>
  <p>
    Iaculis eu non diam phasellus vestibulum lorem sed. Accumsan sit amet nulla facilisi morbi tempus iaculis urna. Fringilla phasellus faucibus scelerisque eleifend donec pretium vulputate sapien nec. In egestas erat imperdiet sed euismod nisi. Sed lectus vestibulum mattis ullamcorper. Facilisi nullam vehicula ipsum a arcu cursus. Fermentum posuere urna nec tincidunt praesent semper. Rhoncus dolor purus non enim. Nibh ipsum consequat nisl vel pretium. Leo urna molestie at elementum eu facilisis. Ullamcorper morbi tincidunt ornare massa eget. Convallis convallis tellus id interdum velit laoreet id donec ultrices. Elit sed vulputate mi sit amet mauris commodo quis imperdiet. At auctor urna nunc id cursus metus aliquam eleifend mi. Purus in massa tempor nec feugiat nisl. Lectus magna fringilla urna porttitor rhoncus dolor purus non enim. Enim nunc faucibus a pellentesque.
  </p>
  <p>
    In massa tempor nec feugiat nisl pretium. Pretium viverra suspendisse potenti nullam ac tortor. Porttitor eget dolor morbi non arcu risus quis varius. Etiam sit amet nisl purus. Nunc consequat interdum varius sit amet mattis vulputate. Eget dolor morbi non arcu. Gravida cum sociis natoque penatibus et magnis. Elementum integer enim neque volutpat ac. Pretium nibh ipsum consequat nisl vel pretium. Sagittis nisl rhoncus mattis rhoncus urna neque viverra justo nec. Id diam vel quam elementum pulvinar etiam non. Ornare suspendisse sed nisi lacus. Auctor augue mauris augue neque gravida in fermentum et. Ornare suspendisse sed nisi lacus sed. Iaculis at erat pellentesque adipiscing commodo. In fermentum et sollicitudin ac orci phasellus egestas tellus rutrum. Iaculis urna id volutpat lacus laoreet non curabitur. Vitae elementum curabitur vitae nunc sed. Ut eu sem integer vitae justo eget magna fermentum iaculis. Sit amet cursus sit amet dictum sit amet justo donec.
  </p>
  <h2 id="ch5" class="chapter">Chapter 5</h2>
  <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Viverra nam libero justo laoreet sit amet cursus. Interdum velit laoreet id donec ultrices tincidunt arcu non. Pellentesque nec nam aliquam sem et tortor consequat. Quis commodo odio aenean sed adipiscing diam donec. Amet consectetur adipiscing elit duis tristique sollicitudin nibh sit. Massa sed elementum tempus egestas sed sed risus pretium. In fermentum et sollicitudin ac orci phasellus egestas tellus. Scelerisque felis imperdiet proin fermentum leo vel orci. Varius sit amet mattis vulputate enim nulla aliquet porttitor lacus.
  </p>
  <p>
    Nunc eget lorem dolor sed viverra ipsum nunc aliquet bibendum. Posuere morbi leo urna molestie at elementum eu facilisis sed. Velit dignissim sodales ut eu sem integer vitae justo eget. Enim ut sem viverra aliquet eget sit amet. Ac felis donec et odio pellentesque diam. Dolor sit amet consectetur adipiscing elit. Venenatis cras sed felis eget velit. Pretium quam vulputate dignissim suspendisse in est ante in nibh. Dui faucibus in ornare quam viverra orci sagittis. Dolor morbi non arcu risus quis. Sem nulla pharetra diam sit amet nisl suscipit adipiscing. Urna condimentum mattis pellentesque id. Dolor sit amet consectetur adipiscing elit duis tristique sollicitudin nibh. Malesuada fames ac turpis egestas sed tempus. Mus mauris vitae ultricies leo integer malesuada nunc vel. Integer enim neque volutpat ac tincidunt vitae semper quis. Nunc non blandit massa enim.
  </p>
  <p>
    Iaculis eu non diam phasellus vestibulum lorem sed. Accumsan sit amet nulla facilisi morbi tempus iaculis urna. Fringilla phasellus faucibus scelerisque eleifend donec pretium vulputate sapien nec. In egestas erat imperdiet sed euismod nisi. Sed lectus vestibulum mattis ullamcorper. Facilisi nullam vehicula ipsum a arcu cursus. Fermentum posuere urna nec tincidunt praesent semper. Rhoncus dolor purus non enim. Nibh ipsum consequat nisl vel pretium. Leo urna molestie at elementum eu facilisis. Ullamcorper morbi tincidunt ornare massa eget. Convallis convallis tellus id interdum velit laoreet id donec ultrices. Elit sed vulputate mi sit amet mauris commodo quis imperdiet. At auctor urna nunc id cursus metus aliquam eleifend mi. Purus in massa tempor nec feugiat nisl. Lectus magna fringilla urna porttitor rhoncus dolor purus non enim. Enim nunc faucibus a pellentesque.
  </p>
  <p>
    In massa tempor nec feugiat nisl pretium. Pretium viverra suspendisse potenti nullam ac tortor. Porttitor eget dolor morbi non arcu risus quis varius. Etiam sit amet nisl purus. Nunc consequat interdum varius sit amet mattis vulputate. Eget dolor morbi non arcu. Gravida cum sociis natoque penatibus et magnis. Elementum integer enim neque volutpat ac. Pretium nibh ipsum consequat nisl vel pretium. Sagittis nisl rhoncus mattis rhoncus urna neque viverra justo nec. Id diam vel quam elementum pulvinar etiam non. Ornare suspendisse sed nisi lacus. Auctor augue mauris augue neque gravida in fermentum et. Ornare suspendisse sed nisi lacus sed. Iaculis at erat pellentesque adipiscing commodo. In fermentum et sollicitudin ac orci phasellus egestas tellus rutrum. Iaculis urna id volutpat lacus laoreet non curabitur. Vitae elementum curabitur vitae nunc sed. Ut eu sem integer vitae justo eget magna fermentum iaculis. Sit amet cursus sit amet dictum sit amet justo donec.
  </p>
  

</body>
<script>
// Mike: I created a function which generates the chapterIds array (rather than hard coding them). This is in prep for using the code in Gaia. However, by defining chapterIds in a function, the variable was in local scope and not accessible to the event listerner function. I googled for a fix and found that I could create a new variable on the window object and make it equal to the local varible (chapterIds2, line 134.). Then I updated the chapterIds varible in the event listerner to the new window object variable, chapterIds2. Somehow, I think you will say this is bad form (feels like it is), but I have not yet found another way to get generate the array via a function and get in global scope. I assume there must be a way.

// Note: The first couple of times I tested the code, the scrolling bahavior was different. It scrolled to chapter 1, then chapter 3, then chapter 2, and then 4.  However, since then, the behavior remains as it was when you tested it.

// Update: Hard reloading the code makes it scroll in the 1, 3, 2, 4 pattern the first time around, then it goes back to the original pattern until the page is hard reloaded.

// I just saved this file (and others), to the repo. I called up the file (index8r4.html) in the browser...and hard reloaded the page. The behavior described above occurs.

// I posted the code to stackoverflow to see if anyone has had this experience (I know you get upset when I do this, but I could not find an explanation to this quirky problem and thought perhaps someone else had.)

const nextBtn = document.getElementById("next");
const previousBtn = document.getElementById("previous");
var chapterIds = getIds();
var curChapterIndex = 0; 

function getIds(){ // creates chapterIds array rather than hard codeing
  var chapters = document.getElementsByClassName('chapter');
  var chapterCount = chapters.length;
  var chapterIds = new Array();
  for (var i = 0; i < chapterCount; i++){
    chapterIds[i] = chapters[i].id;
    window.chapterIds2 = chapterIds; // puts chapterIds into global scope
  }
  console.log("chapter count", chapterCount)
  console.log("chapter ids", chapterIds) 
  console.log("length", chapterIds.length)
}

nextBtn.addEventListener('click', function(){
   curChapterIndex = (curChapterIndex + 1) % chapterIds2.length;
    var target = document.getElementById(chapterIds2[curChapterIndex]);
    console.log("IN CLICK HANDLER", "target", target);
    smoothScroll(target, 1000);
});

function smoothScroll(target, duration){
        var targetPosition = target.getBoundingClientRect().top;
        var headerOffset = 128;
        var targetOffsetPosition = targetPosition - headerOffset;
        var startPosition = window.pageYOffset;
        var distance = targetOffsetPosition - startPosition;
        var startTime = null;

        function animation(currentTime){
            if(startTime === null) startTime = currentTime;
            var timeElapsed = currentTime - startTime;
            var run = ease(timeElapsed, startPosition, distance, duration);
            window.scrollTo(0, run);
            if(timeElapsed < duration) requestAnimationFrame(animation);
        }

        function ease(t, b, c, d){
        t /= d / 2;
        if (t < 1) return c / 2 * t * t + b;
        t--;
        return -c / 2 * (t * (t - 2) - 1) + b;
      }

      requestAnimationFrame(animation);
      console.log("IN smoothScroll",
                  "target", target, "\n",
                  "targetPosition =",targetPosition,"\n",
                  "startPosition =", startPosition, "\n",
                  "distance =", distance);
}
</script>
</html>
